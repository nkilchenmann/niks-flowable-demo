<?xml version="1.0" encoding="UTF-8"?>
<definitions
        xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL"
        xmlns:flowable="http://flowable.org/bpmn"
        targetNamespace="Examples">

    <process id="variablesInSubprocessProcess" name="Variables in Subprocess Process">
        <startEvent id="startEvent"/>

        <sequenceFlow sourceRef="startEvent" targetRef="userTask1"/>
        <userTask id="userTask1" name="User Task 1"/>

        <sequenceFlow sourceRef="userTask1" targetRef="callVariablesInSubprocessSubprocess"/>
        <callActivity id="callVariablesInSubprocessSubprocess" name="Variables in Subprocess Subprocess"
                      calledElement="variablesInSubprocessSubprocess">
            <extensionElements>
                <flowable:in source="myVariableInMainProcess" target="myVariableInSubprocess" />
                <flowable:out source="myVariableInSubprocess" target="myVariableInMainProcess"/>
            </extensionElements>
        </callActivity><!--TODO: pass on variables-->

        <sequenceFlow sourceRef="callVariablesInSubprocessSubprocess" targetRef="logProcessVariablesServiceTask"/>
        <serviceTask id="logProcessVariablesServiceTask" name="Log Process Variables"
                     flowable:expression="${serviceTaskExpression.logProcessVariables(execution)}"/>

        <sequenceFlow sourceRef="logProcessVariablesServiceTask" targetRef="endEvent"/>
        <endEvent id="endEvent"/>
    </process>

</definitions>